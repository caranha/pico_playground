pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
--[[
pretty. make it juicier
interaction between player and
bullets
sound.
make player bounce

]]



csize = 3
mshots = 100

function _init()
	start_game()
end

function start_game()
	shots = {}
	add(shots,
	    {
	    	x = 64,
	    	y = 10,
	    	d = rnd(),
	    	v = 2,
	    	c = rnd(16),
	    	tail = {},
	    	count = 6,
	    }
	   )
	   
	player = {
		x = 64,
		vx = 0,
		y = 64,
		vy = 0,
		v = 2,
		c_rep = 0,
		c_dst = 0,
	}
end

function draw_shot(s)
	color(s.c)
	circ(s.x,s.y,csize)
	for i,v in pairs(s.tail) do
		circ(v[1],v[2],csize*i/(#(s.tail)+1))
	end
end

function draw_player()
	color(7)
	print("웃", player.x-2.5, player.y-2.5)
end


function update_shot(s)
	move_shot(s)
	s.count -= 1/30
	
	if (s.count < 0.8) s.v *= .9
	if s.count < 0 then
		local nd = rnd()
		local c1 = {
			x = s.x,
	  y = s.y,
	  d = nd,
	  v = 2,
	  c = rnd(16),
	  tail = {},
	  count = 6--+rnd()*2,
		}
		local c2 = {
			x = s.x,
	  y = s.y,
	  d = nd+0.5,
	  v = 2,
	  c = rnd(16),
	  tail = {},
	  count = 6--+rnd()*2,
		}
		del(shots,s)
		if (#shots < mshots) add(shots,c1)
		if (#shots < mshots) add(shots,c2)
	end
end

function update_player()
	if (btn(⬆️)) player.vy = -player.v
	if (btn(⬇️)) player.vy = player.v
	if (btn(⬅️)) player.vx = -player.v
	if (btn(➡️)) player.vx = player.v
	
	player.x = mid(2,player.x+player.vx,125)
	player.y = mid(3,player.y+player.vy,125)

	player.vx *= .8
	player.vy *= .8
end

function move_shot(s)
	local dx = s.v*cos(s.d)
	local dy = s.v*sin(s.d)
	
	add(s.tail,{s.x,s.y})
	if (#(s.tail) > 5) del(s.tail,s.tail[1])
	
	s.x += dx
	s.y += dy
	
	if s.x != mid (0,s.x,127) then
		s.x = mid(0,s.x,127)
		dx *= -1
	end
	
	if s.y != mid (0,s.y,127) then
		s.y = mid(0,s.y,127)
		dy *= -1
	end

	s.d = atan2(dx,dy)
	if (abs(s.x - player.x) < 7 and abs(s.y - player.y) < 7) add(shot_box, s)
end

function _update()
	shot_box = {}
	foreach(shots,update_shot)
	update_player()
end

function _draw()
	cls()
	foreach(shots,draw_shot)
	draw_player()
	
	color(10)
	print("s: "..#shots,0,0)
end


__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888eeeeee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888228822888222822888888822888888228888
8888ee888ee88888888888888888888888888888888888888888888888888888888888888888888888ff888ff888222222888222822888882282888888222888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888282282888222888888228882888888288888
888eee8e8ee8888eee8888888888888888888888888888888888888888888888888888888888888888ff888ff888222222888888222888228882888822288888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888822228888228222888882282888222288888
888eee888ee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888828828888228222888888822888222888888
888eeeeeeee888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
111111111611111116161111177711111bbb11b11b1b17111c1c1111161111111616111111c1111c111c11171111111111111111111111111111111111111111
111111111666111116661111111111111b1b11b11b1b17111c1c1111166611111666111111c11ccc111c11171111111111111111111111111111111111111111
111111111116111111161111177711111b1b11b11b1b17111c1c1171111611111116117111c11c11111c11171111111111111111111111111111111111111111
111111111661117116661111111111111b1b1bbb1bbb11711ccc171116611171166617111ccc1ccc111c11711111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111116611616111117171111111111111cc11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111161616161111117117771111111111c11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111161616661111177711111111177711c11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111161611161111117117771111111111c11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111116661666111117171111111111111ccc1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1ee11ee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111ee11e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1e1e1eee1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111166111116611111111111111bbb1bbb1bbb1bb11bbb11711661161611111661161611711111111111111111111111111111111111111111111111111111
11111611111116161111177711111b1b11b11b1b1b1b111b17111616161611111616161611171111111111111111111111111111111111111111111111111111
11111666111116161111111111111bbb11b11bbb1b1b1bbb17111616116111111616166611171111111111111111111111111111111111111111111111111111
11111116111116161111177711111b1b11b11b1b1b1b1b1117111616161611711616111611171111111111111111111111111111111111111111111111111111
11111661117116661111111111111b1b11b11b1b1b1b1bbb11711666161617111666166611711111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1ee11ee111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1eee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1ee111ee1eee1eee11ee1ee1111111111616166616611666166616661171117111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111111111616161616161616116116111711111711111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e1e1111e111e11e1e1e1e111111111616166616161666116116611711111711111111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111111111616161116161616116116111711111711111111111111111111111111111111111111111111111111111111
1e1111ee1e1e11ee11e11eee1ee11e1e111116661166161116661616116116661171117111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111171111111111111111111111111111111111111111111111111111111111111111111111111111111
11111bbb11bb1bbb1bbb1bbb11bb1b1b117111661616116177161166111116161666166116661666166611111166161611661666117111111111111111111111
11111b111b1b1b1b1b111b1b1b111b1b171116111616161177711611111116161616161616161161161111111611161616161161111711111111111111111111
11111bb11b1b1bb11bb11bbb1b111bbb171116661666161177771666111116161666161616661161166111111666166616161161111711111111111111111111
11111b111b1b1b1b1b111b1b1b111b1b171111161616161177111116117116161611161616161161161111111116161616161161111711111111111111111111
11111b111bb11b1b1bbb1b1b11bb1b1b117116611616166111711661171111661611166616161161166616661661161616611161117111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1ee11ee111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1eee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1ee111ee1eee1eee11ee1ee1111111111661166616661616117111711111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111111111616161616161616171111171111111111111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e1e1111e111e11e1e1e1e111111111616166116661616171111171111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111111111616161616161666171111171111111111111111111111111111111111111111111111111111111111111111
1e1111ee1e1e11ee11e11eee1ee11e1e111116661666161616161666117111711111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111bb1b1111bb1171117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111b111b111b111711111711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111b111b111bbb1711111711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111b111b11111b1711111711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111bb1bbb1bb11171117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111bbb11bb1bbb1bbb1bbb11bb1b1b117111661616116616661166111116611666166616161111116616161166166611711111111111111111111111111111
11111b111b1b1b1b1b111b1b1b111b1b171116111616161611611611111116161616161616161111161116161616116111171111111111111111111111111111
11111bb11b1b1bb11bb11bbb1b111bbb171116661666161611611666111116161661166616161111166616661616116111171111111111111111111111111111
11111b111b1b1b1b1b111b1b1b111b1b171111161616161611611116117116161616161616661111111616161616116111171111111111111111111111111111
11111b111bb11b1b1bbb1b1b11bb1b1b117116611616166111611661171116661616161616661666166116161661116111711111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111661166616661616111116661611166616161666166611711171111111111111111111111111111111111111111111111111111111111111111111111111
11111616161616161616111116161611161616161611161617111117111111111111111111111111111111111111111111111111111111111111111111111111
11111616166116661616111116661611166616661661166117111117111111111111111111111111111111111111111111111111111111111111111111111111
11111616161616161666111116111611161611161611161617111117111111111111111111111111111111111111111111111111111111111111111111111111
11111666161616161666166616111666161616661666161611711171111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111bbb1bbb1bbb1bb11bbb11711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111b1b1b1b11b11b1b11b117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111bbb1bb111b11b1b11b117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111b111b1b11b11b1b11b117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111b111b1b1bbb1b1b11b111711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1ee11ee111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1eee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
82888222822882228888822882228228888282288222828288888888888888888888888888888888888888888222822282228882822282288222822288866688
82888828828282888888882882828828882888288282828288888888888888888888888888888888888888888882888282828828828288288282888288888888
82888828828282288888882882828828882888288282822288888888888888888888888888888888888888888822822282228828822288288222822288822288
82888828828282888888882882828828882888288282888288888888888888888888888888888888888888888882828882828828828288288882828888888888
82228222828282228888822282228222828882228222888288888888888888888888888888888888888888888222822282228288822282228882822288822288
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

